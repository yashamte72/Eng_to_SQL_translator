<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>English to SQL Translator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        textarea { width: 100%; padding: 10px; font-size: 1rem; }
        button { margin-top: 10px; padding: 10px 20px; font-size: 1rem; }
        pre { background-color: #f0f0f0; padding: 10px; margin-top: 20px; }
    </style>
</head>
<body>
    <h2>English to SQL Translator</h2>
    <textarea id="input" rows="4" placeholder="Type your English question here..."></textarea><br>
    <button id="translateBtn">Translate</button>
    <pre id="output"></pre>

    <!-- It's safer to run JS *after* the page is fully loaded -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById("translateBtn").addEventListener("click", async function () {
                const inputText = document.getElementById("input").value;

                try {
                    const response = await fetch("/translate", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({ question: inputText })
                    });

                    const data = await response.json();
                    document.getElementById("output").innerText = data.sql;
                } catch (err) {
                    document.getElementById("output").innerText = "Something went wrong: " + err;
                }
            });
        });
    </script>
</body>
</html>
